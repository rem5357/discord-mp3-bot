# Nginx configuration for serving music files to Lavalink
# This configuration serves music on port 8080
# Complete server block in /etc/nginx/sites-available/music

location /music {
    alias /home/mithroll/Shared;

    # Enable directory listing (optional - for browsing)
    autoindex on;
    autoindex_exact_size off;
    autoindex_localtime on;

    # Allow access from anywhere (Lavalink will access it)
    allow all;

    # CORS headers (if needed for Lavalink)
    add_header Access-Control-Allow-Origin *;
    add_header Access-Control-Allow-Methods 'GET, OPTIONS';
    add_header Access-Control-Allow-Headers 'Range';

    # Cache control for audio files
    location ~ \.(mp3|wav|flac|ogg|m4a|aac|opus|webm)$ {
        add_header Cache-Control "public, max-age=31536000";
        add_header Access-Control-Allow-Origin *;
    }

    # M3U playlists
    location ~ \.m3u$ {
        add_header Content-Type "audio/x-mpegurl";
        add_header Access-Control-Allow-Origin *;
    }
}
